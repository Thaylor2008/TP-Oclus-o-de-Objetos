# ============================================
#   Makefile - Trabalho Prático 1 (ED 2025/2)
#   Autor: Thaylor
#   Linguagem: C++
#   Estrutura padrão exigida pelo enunciado
# ============================================

# Compilador e flags
CXX = g++
CXXFLAGS = -std=c++11 -Wall -Iinclude

# Diretórios
SRC_DIR = src
OBJ_DIR = obj
BIN_DIR = bin
INCLUDE_DIR = include

# Arquivos fonte e objetos
SRC_FILES = $(SRC_DIR)/main.cpp $(SRC_DIR)/Objeto.cpp $(SRC_DIR)/Cena.cpp
OBJ_FILES = $(OBJ_DIR)/main.o $(OBJ_DIR)/Objeto.o $(OBJ_DIR)/Cena.o

# Executável final
EXEC = $(BIN_DIR)/tp1.out

# ============================
# Regra principal
# ============================
all: $(EXEC)

# Geração do executável
$(EXEC): $(OBJ_FILES)
	@mkdir -p $(BIN_DIR)
	$(CXX) $(CXXFLAGS) $(OBJ_FILES) -o $(EXEC)

# Compilação dos arquivos fonte para objeto
$(OBJ_DIR)/%.o: $(SRC_DIR)/%.cpp
	@mkdir -p $(OBJ_DIR)
	$(CXX) $(CXXFLAGS) -c $< -o $@

# ============================
# Limpeza
# ============================
clean:
	rm -rf $(OBJ_DIR) $(BIN_DIR)

# Recompila do zero
rebuild: clean all

# ============================
# Execução de teste
# ============================
run:
	$(EXEC) teste.txt
